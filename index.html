<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <meta charset="utf-8" />
    <title>Equilibrium</title>
    <link data-trunk rel="copy-dir" href="assets" />
    <link data-trunk rel="copy-dir" href="credits" />
    <link data-trunk rel="copy-file" href="build/windows/icon.ico" />
    <link rel="icon" href="icon.ico" />
    <link data-trunk rel="inline" href="build/web/styles.css" />
    <style>
      body {
        background: black;
        margin: 0px;
        overflow: hidden;
      }

      canvas {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
      }
    </style>
  </head>

  <body>
    <div>
      <canvas id="game"></canvas>
      <button id="fullscreen-btn">Fullscreen</button>
    </div>
    <script>
      let btn = document.getElementById("fullscreen-btn");
      btn.addEventListener("click", (event) => {
        let canvas = document.getElementById("game");
        canvas.requestFullscreen();
      });

      let touch_added = false;
      let touch_events = [];
      let has_touch = () => {
        return !!("ontouchstart" in window);
      };

      let pop_touch_event = () => {
        let e = touch_events.shift();
        return e;
      };

      let resize_canvas = (width, height) => {
        let canvas = document.getElementById("game");
        canvas.width = width * window.devicePixelRatio;
        canvas.height = height * window.devicePixelRatio;
        canvas.style = `width: ${width}; height: ${height}`;

        if (has_touch() == true && touch_added == false) {
          canvas.addEventListener(
            "touchstart",
            (ev) => {
              ev.preventDefault();
              touch_events.push(ev);
            },
            { passive: false }
          );
          canvas.addEventListener(
            "touchend",
            (ev) => {
              ev.preventDefault();
              touch_events.push(ev);
            },
            { passive: false }
          );
          canvas.addEventListener(
            "touchmove",
            (ev) => {
              ev.preventDefault();
              touch_events.push(ev);
            },
            { passive: false }
          );

          touch_added = true;
        }
      };
    </script>
  </body>
</html>
